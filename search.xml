<?xml version="1.0" encoding="utf-8"?>
<search>
  
    
    <entry>
      <title><![CDATA[JSP + Servlet + MySQL实现简单登录]]></title>
      <url>%2F2017%2F04%2F26%2FJSP%20%2B%20Servlet%20%2B%20MySQL%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E7%99%BB%E5%BD%95%2F</url>
      <content type="text"><![CDATA[开始学习JavaWeb，想尝试不用框架实现一下简单的登录注册功能。（下面的也是网上找的，整理一下） 开发环境： JDK1.8.0_131 Tomcat 8.5.13 Intellij IDEA MySQL JDBC connetcor 1. 下载 JDBC Connector下载完之后解压在如 C:\mysql-connector-java-5.1.41， 把里面的mysql-connector-java-5.1.41-bin 复制到Tomcat路径下的lib下面.(框架一般会集成JDBC了. ) 下载地址 2. 创建工程创建Web application 工程 创建好了的目录长这样… 3. 编写Servlet1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798/** * Created by Myron on 4/26/2017. */package com.myron;import java.io.IOException;import java.io.PrintWriter;import java.sql.*;import javax.servlet.ServletException;import javax.servlet.ServletRequest;import javax.servlet.http.HttpServlet;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;public class ServletTest extends HttpServlet &#123; /** * Destruction of the servlet. &lt;br&gt; */ Connection conn; public void destroy() &#123; super.destroy(); // Just puts "destroy" string in log // Put your code here &#125; public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123; doPost(request,response); &#125; public void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123; response.setContentType("text/html"); request.setCharacterEncoding("UTF-8"); response.setCharacterEncoding("UTF-8"); String username = request.getParameter("username"); String password = request.getParameter("password"); if(conn!=null)&#123; String sql = " select * from user where username = ? and password = ?"; try &#123; PreparedStatement ps = conn.prepareStatement(sql); ps.setString(1, username); ps.setString(2, password); ResultSet rs = ps.executeQuery(); if(rs.next())&#123; PrintWriter out = response.getWriter(); out.println("&lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\"&gt;"); out.println("&lt;HTML&gt;"); out.println(" &lt;HEAD&gt;&lt;TITLE&gt;A Servlet&lt;/TITLE&gt;&lt;/HEAD&gt;"); out.println(" &lt;BODY&gt;"); out.print(" This is login JSP. "); out.println("Username: " + username + ", login successfully!"); out.println(" &lt;/BODY&gt;"); out.println("&lt;/HTML&gt;"); out.flush(); out.close(); &#125; else &#123; PrintWriter out = response.getWriter(); out.println("&lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\"&gt;"); out.println("&lt;HTML&gt;"); out.println(" &lt;HEAD&gt;&lt;TITLE&gt;A Servlet&lt;/TITLE&gt;&lt;/HEAD&gt;"); out.println(" &lt;BODY&gt;"); out.print(" This is login JSP. "); out.println("Username: " + username + ", login failed!"); out.println(" &lt;/BODY&gt;"); out.println("&lt;/HTML&gt;"); out.flush(); out.close(); &#125; &#125; catch (SQLException e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; &#125; &#125; /** * Initialization of the servlet. &lt;br&gt; * * @throws ServletException if an error occurs */ public void init() throws ServletException &#123; super.init(); try&#123; Class.forName("com.mysql.jdbc.Driver"); String url = "jdbc:mysql://localhost:3306/test2"; conn = DriverManager.getConnection(url, "root", "root"); &#125;catch(Exception e)&#123; e.printStackTrace(); System.out.println("Connetc to DataBase failed!"); &#125; &#125;&#125; 需要导入servlet的包， servlet包在Tomcat路径下的lib文件夹中。 右键点击Project –&gt; Open Module Setting (或者点击Intellij IDEA右上角的Project Structure图标，又或者Ctrl + Alt + Shift +s) 注意servlet连接数据库的代码: 123456789101112131415public void init() throws ServletException &#123; super.init(); try&#123; //注册Driver Class.forName("com.mysql.jdbc.Driver"); //数据库的路径，一般只改后面的database名称就行了，注意是database，不是表 String url = "jdbc:mysql://localhost:3306/test2"; //两个root，一个是数据库的登录名称，一个是密码，根据自己的数据库情况修改 conn = DriverManager.getConnection(url, "root", "root"); &#125;catch(Exception e)&#123; e.printStackTrace(); System.out.println("Connetc to DataBase failed!"); &#125;&#125; 4. 编写登录界面1234567891011121314151617181920212223242526272829303132333435363738&lt;%@ page language="java" import="java.util.*" pageEncoding="UTF-8"%&gt;&lt;% String path = request.getContextPath(); String basePath = request.getScheme()+"://"+request.getServerName()+":"+request.getServerPort()+path+"/";%&gt;&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"&gt;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;title&gt;Login&lt;/title&gt;&lt;body&gt;&lt;form action="ServletTest" method="post"&gt; &lt;table align="center"&gt; &lt;tr&gt; &lt;td colspan="2"&gt;&lt;h3 align="center"&gt;Login to the System&lt;/h3&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;username:&lt;/td&gt; &lt;td&gt;&lt;input type="text" name="username"/&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;password:&lt;/td&gt; &lt;td&gt;&lt;input type="password" name="password"/&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&amp;nbsp;&lt;/td&gt; &lt;td align="center" colspan="2"&gt; &lt;input type="submit" value="Submit"/&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;input type="reset" value="Reset"/&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/table&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt; 5. 编写web.xml完整的web.xml如下： 1234567891011121314151617&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd" version="3.1"&gt; &lt;servlet&gt; &lt;servlet-name&gt;ServletTest&lt;/servlet-name&gt; &lt;servlet-class&gt;com.myron.ServletTest&lt;/servlet-class&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;ServletTest&lt;/servlet-name&gt; &lt;url-pattern&gt;/ServletTest&lt;/url-pattern&gt; &lt;/servlet-mapping&gt;&lt;/web-app&gt; 6. 创建数据库123456Create database test2;Create table test2.user( username varchar(50) not null, password varchar(50) );insert into test2.user(username, password) value("myron", "123456"); 7. 运行工程 输入刚才创建的username: myron 和password: 123456 运行成功]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[使用IntelliJ IDEA开发Spring MVC HelloWorld]]></title>
      <url>%2F2017%2F04%2F25%2F%E4%BD%BF%E7%94%A8IntelliJ%20IDEA%E5%BC%80%E5%8F%91Spring%20MVC%20HelloWorld%2F</url>
      <content type="text"><![CDATA[开发环境 JDK1.8.0_131 Tomcat 8.5.13 Intellij IDEA 1. 创建工程打开IntelliJ IDEA 新建一个project，选择Spring MVC,Project name写: SpringHello, 然后点击Finish，等待download finish. 创建完成的目录： 2. 配置Web.xml首先打开web/WEB-INF目录下的web.xml文件，如下，把url-pattern的值改为/，用于拦截请求（url-pattern为 / ，说明拦截所有请求,网上有说配置为/*的，我这样配置会出错），并交由Spring MVC的后台控制器来处理。这一项配置是必须的。 12345678910111213141516171819202122&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd" version="3.1"&gt; &lt;context-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;/WEB-INF/applicationContext.xml&lt;/param-value&gt; &lt;/context-param&gt; &lt;listener&gt; &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt; &lt;/listener&gt; &lt;servlet&gt; &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt;&lt;/web-app&gt; 3. 编写ControllerMVC框架有model、view、controller三部分组成。model一般为一些基本的Java Bean，view用于进行相应的页面显示，controller用于处理网站的请求。 在项目的src目录创建一个包用于存放Controller, 包的名字为: com.myron.hello，在包下创建一个HelloController类 添加以下代码：123456789101112131415161718192021package com.myron.hello;import org.springframework.stereotype.Controller;import org.springframework.ui.ModelMap;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestMethod;/** * Created by Myron on 4/25/2017. */@Controller@RequestMapping(value = "/hello", method = RequestMethod.GET)public class HelloController &#123; @RequestMapping(value = "/hello", method = RequestMethod.GET) public String printHello(ModelMap model) &#123; model.addAttribute("msg", "Spring MVC Hello World"); model.addAttribute("name", "myron"); return "hello"; &#125;&#125; 解释下上边代码的意思 @Controller注解：采用注解的方式定义该类为处理请求的Controller类； @RequestMapping解：用于定义一个请求映射，value为请求的url，method用以指定该请求类型，一般为get和post，代码中要调用printHello方法，即可访问 hello/hello return “hello”：处理完该请求后返回的页面，此请求返回 hello.jsp页面。 4. 创建View层接下来删除web目录下的index.jsp,在web/WEB-INF中创建一个views目录，然后创建一个hello.jsp文件，添加如下代码： 12345678910&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;$&#123;msg&#125;&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;$&#123;msg&#125;&lt;/h1&gt;&lt;span&gt;$&#123;name&#125;&lt;/span&gt;&lt;/body&gt;&lt;/html&gt; 5. 配置xxx-servlet.xml完成上边的步骤之后，在web.xml同级目录下有个dispatcher-servlet.xml的配置文件，他的前缀dispatcher对应上边web.xml中配置的servlet（名称可修改）。 打开dispatcher-servlet.xml是空的，我们需要添加一些配置 首先要指定下controller所在的包，这样spring mvc会扫描其中的注解 1&lt;context:component-scan base-package="com.myron.hello"/&gt; 1234567&lt;!--ViewResolver 视图解析器--&gt;&lt;!--用于支持Servlet、JSP视图解析--&gt;&lt;bean id="jspViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt; &lt;property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/&gt; &lt;property name="prefix" value="/WEB-INF/views/"/&gt; &lt;property name="suffix" value=".jsp"/&gt;&lt;/bean&gt; 还需要配置下边两项，静态资源访问，开启注解。 12345&lt;!-- 静态资源(js、image等)的访问 --&gt;&lt;mvc:default-servlet-handler/&gt;&lt;!-- 开启注解 --&gt;&lt;mvc:annotation-driven/&gt; 最后配置完成如下12345678910111213141516171819202122&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context" xmlns:mvc="http://www.springframework.org/schema/mvc" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd"&gt; &lt;context:component-scan base-package="com.myron.hello"/&gt; &lt;!-- 静态资源(js、image等)的访问 --&gt; &lt;mvc:default-servlet-handler/&gt; &lt;!-- 开启注解 --&gt; &lt;mvc:annotation-driven/&gt; &lt;!--ViewResolver 视图解析器--&gt; &lt;!--用于支持Servlet、JSP视图解析--&gt; &lt;bean id="jspViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt; &lt;property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/&gt; &lt;property name="prefix" value="/WEB-INF/views/"/&gt; &lt;property name="suffix" value=".jsp"/&gt; &lt;/bean&gt;&lt;/beans&gt; 6.导入Spring和Spring MVC的jar点击工程 –&gt; F4 7.下载standard和jstl包如果没有standard和jstl包会导致： NoClassDefFoundError: javax/servlet/jsp/jstl/core/Config 下载地址 下载解压后将standard和jstl两个包放入web.WEB-INF/lib下即可，如果没有lib可新建一个 打开: http://localhost:8080/hello/hello 就能看到运行成功 工程和文章都是参考[industriously]]]></content>
    </entry>

    
  
  
</search>
